<meta charset="UTF-8">
<html>

<head>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
    <script src="js/publish.js"></script>
    <style>
    .div-section {
        margin-bottom: 8px;
    }
    </style>
</head>

<body>
		<h2>Record Screen</h2>
        <div><video id="localVideo" autoplay playsinline muted style="width:640px;height:480px;"></video></div>

        <h2>Preview Screen</h2>
        <div><video id="remoteVideo" autoplay playsinline muted style="width:640px;height:480px;"></video></div>

        <div class="ui segment form">
        <span id="sdpDataTag">Connecting...</span>
        <div>Live on: <a href="https://vimeo.com/event/33942" target="_blank">https://vimeo.com/event/33942</a></div>
        <div>Live on (our embed): <a href="vimeo.html" target="_blank">vimeo.html</a></div>
        <div id="serverUrlDisplay">If blank screen, <br/>
            1. Should open this for allow HTTPS before : <span id="serverUrl">Connecting...</span><br/>
            2. Check node server is started (node server.js)
        </div>

        <hr class="divider" />

        <div class="field inline">
            <label for="videoSource">Video Source </label><select class="ui dropdown" id="videoSource"></select>
        </div>

        <div class="field inline">
            <label for="videoResolution">Video Resolution </label><select class="ui dropdown"
                id="videoResolution"></select>
        </div>

        <div class="field inline">
            <label for="audioSource">Audio Source </label><select class="ui dropdown" id="audioSource"></select>
        </div>

      </div>

        <div id="log"></div>
        <script type="text/javascript">
        var localVideoRaw = document.querySelector('#localVideo');

        var userAgent = navigator.userAgent;
        var wsURL = "wss://10.91.2.19:9000";
        var videoBitrate = 2000000;
        var audioBitrate = 64;
        var videoFrameRate = 30;
        var bufferTimeout = 2000;
        var videoChoice = "42e01f";
        var audioChoice = "opus";
        
        var wsURLhttps= wsURL.replace("wss", "https")
        $('#serverUrl').html('<a href="'+wsURLhttps+'/socket.io/" target="_blank">'+wsURLhttps+'/socket.io/<a>');

        jQuery(document).ready(function() {
            setTimeout(browserReady(), bufferTimeout);
        });

        </script>

    </body>


</html>